{
  "name": "prd-etl_auth_login_raw_bronze_silver",
  "email_notifications": {
    "no_alert_for_skipped_runs": false
  },
  "webhook_notifications": {},
  "timeout_seconds": 0,
  "schedule": {
    "quartz_cron_expression": "0 0 7 * * ?",
    "timezone_id": "America/Sao_Paulo",
    "pause_status": "UNPAUSED"
  },
  "max_concurrent_runs": 1,
  "tasks": [
    {
      "task_key": "login_back_rawdlh_to_bronze",
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/01_ecs_auth_back_end_rawdlh_to_bronze",
        "base_parameters": {
          "reprocess": "false",
          "source": "login"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "login_back_bronze_to_silver",
      "depends_on": [
        {
          "task_key": "login_back_rawdlh_to_bronze"
        }
      ],
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/03_ecs_auth_bronze_to_silver",
        "base_parameters": {
          "reprocess": "false",
          "source": "login",
          "camada": "back"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "login_front_rawdlh_to_bronze",
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/02_ecs_auth_front_end_rawdlh_to_bronze",
        "base_parameters": {
          "reprocess": "false",
          "source": "login"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "login_front_bronze_to_silver",
      "depends_on": [
        {
          "task_key": "login_front_rawdlh_to_bronze"
        }
      ],
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/03_ecs_auth_bronze_to_silver",
        "base_parameters": {
          "reprocess": "false",
          "source": "login",
          "camada": "front"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "signup_back_rawdlh_to_bronze",
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/01_ecs_auth_back_end_rawdlh_to_bronze",
        "base_parameters": {
          "reprocess": "false",
          "source": "signup"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "signup_back_bronze_to_silver",
      "depends_on": [
        {
          "task_key": "signup_back_rawdlh_to_bronze"
        }
      ],
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/03_ecs_auth_bronze_to_silver",
        "base_parameters": {
          "reprocess": "false",
          "source": "signup",
          "camada": "back"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "signup_front_rawdlh_to_bronze",
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/02_ecs_auth_front_end_rawdlh_to_bronze",
        "base_parameters": {
          "reprocess": "false",
          "source": "signup"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    },
    {
      "task_key": "signup_front_bronze_to_silver",
      "depends_on": [
        {
          "task_key": "signup_front_rawdlh_to_bronze"
        }
      ],
      "run_if": "ALL_SUCCESS",
      "notebook_task": {
        "notebook_path": "src/databricks/workspace/03_ecs_auth_bronze_to_silver",
        "base_parameters": {
          "reprocess": "false",
          "source": "signup",
          "camada": "front"
        },
        "source": "GIT"
      },
      "job_cluster_key": "ecs-auth",
      "timeout_seconds": 0,
      "email_notifications": {},
      "webhook_notifications": {}
    }
  ],
  "job_clusters": [
    {
      "job_cluster_key": "ecs-auth",
      "new_cluster": {
        "cluster_name": "",
        "spark_version": "16.4.x-scala2.12",
        "spark_conf": {
          "spark.hadoop.fs.s3a.requester-pays.enabled": "true",
          "spark.hadoop.fs.s3a.acl.default": "BucketOwnerFullControl",
          "spark.hadoop.fs.s3.enableServerSideEncryption": "true",
          "spark.hadoop.fs.s3.s3a.acl.default": "BucketOwnerFullControl"
        },
        "aws_attributes": {
          "first_on_demand": 1,
          "availability": "SPOT_WITH_FALLBACK",
          "zone_id": "us-east-1d",
          "instance_profile_arn": "arn:aws:iam::093785888205:instance-profile/dataops-databricks-workerenv-instance-profile-prd",
          "spot_bid_price_percent": 100,
          "ebs_volume_count": 0
        },
        "node_type_id": "r6gd.2xlarge",
        "driver_node_type_id": "r6gd.2xlarge",
        "enable_elastic_disk": false,
        "runtime_engine": "STANDARD",
        "autoscale": {
          "min_workers": 2,
          "max_workers": 5
        }
      }
    }
  ],
  "git_source": {
    "git_url": "https://gitlab.ecsbr.net/dataops/core/dataops-data-pipeline-auth-login.git",
    "git_provider": "gitLab",
    "git_branch": "main"
  },
  "tags": {
    "BU": "ECS",
    "BusinessServices": "FRAUD",
    "CreatedBy": "FRAUD",
    "Data_Category": "MEDIA",
    "Environment": "PRD",
    "JobType": "ETL",
    "datadog": "TRUE"
  },
  "run_as": {
    "user_name": "ecs_ci_cd_datalake@br.experian.com"
  }
}